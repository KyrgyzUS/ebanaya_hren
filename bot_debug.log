2025-01-12 03:31:49,068 - __main__ - DEBUG - Используемый интерпретатор Python: C:\RENDERS ANIM\pythonProject4\venv\Scripts\python.exe
2025-01-12 03:31:49,069 - __main__ - DEBUG - Пути поиска модулей: ['C:\\RENDERS ANIM\\pythonProject4', 'C:\\Program Files\\Python312\\python312.zip', 'C:\\Program Files\\Python312\\DLLs', 'C:\\Program Files\\Python312\\Lib', 'C:\\Program Files\\Python312', 'C:\\RENDERS ANIM\\pythonProject4\\venv', 'C:\\RENDERS ANIM\\pythonProject4\\venv\\Lib\\site-packages']
2025-01-12 03:31:49,069 - asyncio - DEBUG - Using proactor: IocpProactor
2025-01-12 03:31:49,248 - urllib3.util.retry - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2025-01-12 03:31:49,259 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-01-12 03:31:49,262 - aiogram - DEBUG - Make request: "getMe" with data: "{}" and files "None"
2025-01-12 03:31:49,603 - aiogram - DEBUG - Response for getMe: [200] "'{"ok":true,"result":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false,"can_connect_to_business":false,"has_main_web_app":false}}'"
2025-01-12 03:31:49,604 - aiogram - INFO - Bot: Admin Fashion [@DordoiFashionAdminBot]
2025-01-12 03:31:49,604 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:31:49,714 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:31:49,714 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': -1, 'timeout': 1}" and files "None"
2025-01-12 03:31:50,830 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:31:50,831 - aiogram - WARNING - Updates are skipped successfully.
2025-01-12 03:31:50,832 - __main__ - INFO - Бот запускается...
2025-01-12 03:31:50,833 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001EE8DFDB7E0>
2025-01-12 03:31:50,835 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001EE8DFDB7E0> completed
2025-01-12 03:31:50,835 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:31:50,837 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:31:50,837 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:31:50,838 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:31:50,838 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', [])
2025-01-12 03:31:50,839 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', []) completed
2025-01-12 03:31:50,839 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EE8DF2F010>)
2025-01-12 03:31:50,839 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EE8DF2F010>) completed
2025-01-12 03:31:50,840 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2F010>)
2025-01-12 03:31:50,840 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2F010>) completed
2025-01-12 03:31:50,840 - __main__ - INFO - База данных инициализирована.
2025-01-12 03:31:50,840 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-01-12 03:31:50,840 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:31:51,023 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:31:51,024 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:32:11,142 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:32:11,248 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:32:31,374 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:32:31,478 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:32:51,595 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:32:51,707 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:32:55,639 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454113,\n"message":{"message_id":2287,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631174,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}'"
2025-01-12 03:32:55,639 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:32:55,640 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Добро пожаловать! Выберите действие:', 'reply_to_message_id': 2287, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:32:55,751 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454114, 'timeout': 20}" and files "None"
2025-01-12 03:32:55,784 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2288,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631174,"reply_to_message":{"message_id":2287,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631174,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:33:04,102 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454114,\n"message":{"message_id":2289,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631183,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}'"
2025-01-12 03:33:04,103 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:04,105 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Добро пожаловать! Выберите действие:', 'reply_to_message_id': 2289, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:04,216 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454115, 'timeout': 20}" and files "None"
2025-01-12 03:33:04,246 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2290,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631183,"reply_to_message":{"message_id":2289,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631183,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:33:08,512 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454115,\n"callback_query":{"id":"6686879793000884852","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2290,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631183,"reply_to_message":{"message_id":2289,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631183,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"create_table"}}]}'"
2025-01-12 03:33:08,514 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:08,515 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите ID клиента для которого необходимо создать таблицу:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:08,631 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454116, 'timeout': 20}" and files "None"
2025-01-12 03:33:08,695 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2291,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631187,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:33:10,113 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454116,\n"callback_query":{"id":"6686879794643942135","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2291,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631187,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}},"chat_instance":"79870086369164028","data":"cancel"}}]}'"
2025-01-12 03:33:10,115 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:10,115 - aiogram - DEBUG - Make request: "deleteMessage" with data: "{'chat_id': 5851877822, 'message_id': 2290}" and files "None"
2025-01-12 03:33:10,227 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454117, 'timeout': 20}" and files "None"
2025-01-12 03:33:10,254 - aiogram - DEBUG - Response for deleteMessage: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:33:10,255 - aiogram - DEBUG - Make request: "answerCallbackQuery" with data: "{'callback_query_id': '6686879794643942135', 'text': 'Процесс отменен.'}" and files "None"
2025-01-12 03:33:10,396 - aiogram - DEBUG - Response for answerCallbackQuery: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:33:10,396 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Вы отменили процесс.', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:10,524 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2292,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631189,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:33:12,678 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454117,\n"callback_query":{"id":"6686879793254518996","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2291,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631187,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}},"chat_instance":"79870086369164028","data":"cancel"}}]}'"
2025-01-12 03:33:12,679 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:12,679 - aiogram - DEBUG - Make request: "answerCallbackQuery" with data: "{'callback_query_id': '6686879793254518996', 'text': 'Процесс отменен.'}" and files "None"
2025-01-12 03:33:12,784 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454118, 'timeout': 20}" and files "None"
2025-01-12 03:33:12,832 - aiogram - DEBUG - Response for answerCallbackQuery: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:33:12,833 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Вы отменили процесс.', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:13,013 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2293,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631191,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:33:15,879 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454118,\n"callback_query":{"id":"6686879796003305940","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2291,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631187,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}},"chat_instance":"79870086369164028","data":"cancel"}}]}'"
2025-01-12 03:33:15,880 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:15,881 - aiogram - DEBUG - Make request: "answerCallbackQuery" with data: "{'callback_query_id': '6686879796003305940', 'text': 'Процесс отменен.'}" and files "None"
2025-01-12 03:33:15,984 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454119, 'timeout': 20}" and files "None"
2025-01-12 03:33:16,002 - aiogram - DEBUG - Response for answerCallbackQuery: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:33:16,003 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Вы отменили процесс.', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:16,154 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2294,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631195,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:33:25,832 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454119,\n"callback_query":{"id":"6686879793345953981","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2292,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631189,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"register_client"}}]}'"
2025-01-12 03:33:25,834 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:25,835 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите имя клиента:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:25,942 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454120, 'timeout': 20}" and files "None"
2025-01-12 03:33:26,055 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2295,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631205,"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043c\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:33:30,261 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454120,\n"message":{"message_id":2296,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631209,"text":"Baiel"}}]}'"
2025-01-12 03:33:30,263 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:30,265 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите фамилию клиента:', 'reply_to_message_id': 2296, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:30,367 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454121, 'timeout': 20}" and files "None"
2025-01-12 03:33:30,490 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2297,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631209,"reply_to_message":{"message_id":2296,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631209,"text":"Baiel"},"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0444\\u0430\\u043c\\u0438\\u043b\\u0438\\u044e \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:33:33,642 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454121,\n"message":{"message_id":2298,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631212,"text":"Test"}}]}'"
2025-01-12 03:33:33,643 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:33,643 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите номер телефона клиента (формат +7xxxxxxxxxx):', 'reply_to_message_id': 2298, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:33,755 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454122, 'timeout': 20}" and files "None"
2025-01-12 03:33:33,781 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2299,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631212,"reply_to_message":{"message_id":2298,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631212,"text":"Test"},"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043d\\u043e\\u043c\\u0435\\u0440 \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 (\\u0444\\u043e\\u0440\\u043c\\u0430\\u0442 +7xxxxxxxxxx):","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:33:43,784 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454122,\n"message":{"message_id":2300,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631222,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]}}]}'"
2025-01-12 03:33:43,785 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:43,786 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите город клиента:', 'reply_to_message_id': 2300, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:43,893 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454123, 'timeout': 20}" and files "None"
2025-01-12 03:33:43,959 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2301,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631222,"reply_to_message":{"message_id":2300,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631222,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]},"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0433\\u043e\\u0440\\u043e\\u0434 \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:33:49,951 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454123,\n"message":{"message_id":2302,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631228,"text":"Herpolis"}}]}'"
2025-01-12 03:33:49,952 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:33:49,953 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Город не распознан или не поддерживается. Пожалуйста, выберите из списка доступных.', 'reply_to_message_id': 2302, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:33:50,066 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:33:50,085 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2303,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631229,"reply_to_message":{"message_id":2302,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631228,"text":"Herpolis"},"text":"\\u0413\\u043e\\u0440\\u043e\\u0434 \\u043d\\u0435 \\u0440\\u0430\\u0441\\u043f\\u043e\\u0437\\u043d\\u0430\\u043d \\u0438\\u043b\\u0438 \\u043d\\u0435 \\u043f\\u043e\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442\\u0441\\u044f. \\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0438\\u0437 \\u0441\\u043f\\u0438\\u0441\\u043a\\u0430 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b\\u0445.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:34:10,194 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:34:10,309 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:34:30,434 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:34:30,543 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:34:50,659 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:34:50,768 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:35:10,894 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:35:11,001 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:35:31,115 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:35:31,217 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:35:51,325 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:35:51,434 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454124, 'timeout': 20}" and files "None"
2025-01-12 03:36:03,587 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454124,\n"message":{"message_id":2304,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631362,"text":"\\u041c\\u043e\\u0441\\u043a\\u0432\\u0430"}}]}'"
2025-01-12 03:36:03,588 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:03,590 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001EE8DFDBEC0>
2025-01-12 03:36:03,590 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001EE8DFDBEC0> completed
2025-01-12 03:36:03,591 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2FB50>, '\n            INSERT INTO clients (first_name, last_name, phone_number, city)\n            VALUES (?, ?, ?, ?)\n        ', ('Baiel', 'Test', '+79999999999', 'Москва'))
2025-01-12 03:36:03,592 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2FB50>, '\n            INSERT INTO clients (first_name, last_name, phone_number, city)\n            VALUES (?, ?, ?, ?)\n        ', ('Baiel', 'Test', '+79999999999', 'Москва')) completed
2025-01-12 03:36:03,593 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EE8DF2FB50>)
2025-01-12 03:36:03,595 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EE8DF2FB50>) completed
2025-01-12 03:36:03,595 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2FB50>)
2025-01-12 03:36:03,595 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2FB50>) completed
2025-01-12 03:36:03,595 - __main__ - INFO - Новый клиент зарегистрирован: Baiel Test, Телефон: +79999999999, Город: Москва
2025-01-12 03:36:03,595 - aiogram - DEBUG - Make request: "deleteMessage" with data: "{'chat_id': 5851877822, 'message_id': 2301}" and files "None"
2025-01-12 03:36:03,695 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454125, 'timeout': 20}" and files "None"
2025-01-12 03:36:03,724 - aiogram - DEBUG - Response for deleteMessage: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:36:03,725 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Клиент успешно зарегистрирован.', 'reply_to_message_id': 2304, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:03,853 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2305,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631362,"reply_to_message":{"message_id":2304,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631362,"text":"\\u041c\\u043e\\u0441\\u043a\\u0432\\u0430"},"text":"\\u041a\\u043b\\u0438\\u0435\\u043d\\u0442 \\u0443\\u0441\\u043f\\u0435\\u0448\\u043d\\u043e \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:36:08,429 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454125,\n"callback_query":{"id":"6686879792751746176","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2305,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631362,"reply_to_message":{"message_id":2304,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631362,"text":"\\u041c\\u043e\\u0441\\u043a\\u0432\\u0430"},"text":"\\u041a\\u043b\\u0438\\u0435\\u043d\\u0442 \\u0443\\u0441\\u043f\\u0435\\u0448\\u043d\\u043e \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"search_client"}}]}'"
2025-01-12 03:36:08,431 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:08,432 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите номер телефона клиента для поиска в формате +7xxxxxxxxxx или +99x-xxx-xxx-xxx:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:08,546 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454126, 'timeout': 20}" and files "None"
2025-01-12 03:36:08,602 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2306,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631367,"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043d\\u043e\\u043c\\u0435\\u0440 \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043f\\u043e\\u0438\\u0441\\u043a\\u0430 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 +7xxxxxxxxxx \\u0438\\u043b\\u0438 +99x-xxx-xxx-xxx:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:36:14,510 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454126,\n"message":{"message_id":2307,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631373,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]}}]}'"
2025-01-12 03:36:14,511 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:14,511 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001EE8DFDBC40>
2025-01-12 03:36:14,514 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001EE8DFDBC40> completed
2025-01-12 03:36:14,515 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F3D0>, 'SELECT id FROM clients WHERE phone_number = ?', ('+79999999999',))
2025-01-12 03:36:14,515 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2F3D0>, 'SELECT id FROM clients WHERE phone_number = ?', ('+79999999999',)) completed
2025-01-12 03:36:14,515 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001EE8E050CC0>)
2025-01-12 03:36:14,515 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001EE8E050CC0>) completed
2025-01-12 03:36:14,516 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2F3D0>)
2025-01-12 03:36:14,516 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2F3D0>) completed
2025-01-12 03:36:14,516 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'ID клиента с номером телефона +79999999999: 11', 'reply_to_message_id': 2307, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:14,609 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454127, 'timeout': 20}" and files "None"
2025-01-12 03:36:14,658 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2308,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631373,"reply_to_message":{"message_id":2307,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631373,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]},"text":"ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0441 \\u043d\\u043e\\u043c\\u0435\\u0440\\u043e\\u043c \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 +79999999999: 11","entities":[{"offset":30,"length":12,"type":"phone_number"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:36:21,859 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454127,\n"callback_query":{"id":"6686879796095039772","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2308,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631373,"reply_to_message":{"message_id":2307,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631373,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]},"text":"ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0441 \\u043d\\u043e\\u043c\\u0435\\u0440\\u043e\\u043c \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 +79999999999: 11","entities":[{"offset":30,"length":12,"type":"phone_number"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"sheet_to_pdf"}}]}'"
2025-01-12 03:36:21,859 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:21,860 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Отправьте ссылку на Google Таблицу, чтобы получить её в формате PDF.', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:21,962 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454128, 'timeout': 20}" and files "None"
2025-01-12 03:36:21,984 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2309,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631380,"text":"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u044c\\u0442\\u0435 \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\u043d\\u0430 Google \\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0435\\u0451 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 PDF.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:36:25,824 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454128,\n"callback_query":{"id":"6686879794886298389","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2309,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631380,"text":"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u044c\\u0442\\u0435 \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\u043d\\u0430 Google \\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0435\\u0451 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 PDF.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}},"chat_instance":"79870086369164028","data":"cancel"}}]}'"
2025-01-12 03:36:25,825 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:25,826 - aiogram - DEBUG - Make request: "deleteMessage" with data: "{'chat_id': 5851877822, 'message_id': 2308}" and files "None"
2025-01-12 03:36:25,931 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454129, 'timeout': 20}" and files "None"
2025-01-12 03:36:25,942 - aiogram - DEBUG - Response for deleteMessage: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:36:25,943 - aiogram - DEBUG - Make request: "answerCallbackQuery" with data: "{'callback_query_id': '6686879794886298389', 'text': 'Процесс отменен.'}" and files "None"
2025-01-12 03:36:26,058 - aiogram - DEBUG - Response for answerCallbackQuery: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:36:26,058 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Вы отменили процесс.', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:26,183 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2310,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631385,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:36:28,462 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454129,\n"callback_query":{"id":"6686879792862564360","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2309,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631380,"text":"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u044c\\u0442\\u0435 \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\u043d\\u0430 Google \\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0435\\u0451 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 PDF.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}},"chat_instance":"79870086369164028","data":"cancel"}}]}'"
2025-01-12 03:36:28,463 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:28,464 - aiogram - DEBUG - Make request: "answerCallbackQuery" with data: "{'callback_query_id': '6686879792862564360', 'text': 'Процесс отменен.'}" and files "None"
2025-01-12 03:36:28,568 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454130, 'timeout': 20}" and files "None"
2025-01-12 03:36:28,579 - aiogram - DEBUG - Response for answerCallbackQuery: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:36:28,579 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Вы отменили процесс.', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:28,704 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2311,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631387,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:36:38,030 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454130,\n"callback_query":{"id":"6686879794018186358","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2311,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631387,"text":"\\u0412\\u044b \\u043e\\u0442\\u043c\\u0435\\u043d\\u0438\\u043b\\u0438 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"my_invoices"}}]}'"
2025-01-12 03:36:38,032 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:38,033 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001EE8E04C360>
2025-01-12 03:36:38,034 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001EE8E04C360> completed
2025-01-12 03:36:38,034 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2FD30>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,))
2025-01-12 03:36:38,035 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2FD30>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,)) completed
2025-01-12 03:36:38,036 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EE8E05C940>)
2025-01-12 03:36:38,036 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EE8E05C940>) completed
2025-01-12 03:36:38,036 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2FD30>)
2025-01-12 03:36:38,037 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2FD30>) completed
2025-01-12 03:36:38,037 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Ваши последние счет-фактуры:\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU\n', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:38,150 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454131, 'timeout': 20}" and files "None"
2025-01-12 03:36:38,168 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2312,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631397,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:36:56,235 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454131,\n"callback_query":{"id":"6686879792022491997","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2312,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631397,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"create_table"}}]}'"
2025-01-12 03:36:56,236 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:56,236 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите ID клиента для которого необходимо создать таблицу:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:56,341 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454132, 'timeout': 20}" and files "None"
2025-01-12 03:36:56,364 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2313,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631415,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:36:58,952 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454132,\n"message":{"message_id":2314,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631417,"text":"11"}}]}'"
2025-01-12 03:36:58,953 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:36:58,956 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001EE88563E20>
2025-01-12 03:36:58,957 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001EE88563E20> completed
2025-01-12 03:36:58,957 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8E064040>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,))
2025-01-12 03:36:58,959 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8E064040>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,)) completed
2025-01-12 03:36:58,960 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001EE8E05DD40>)
2025-01-12 03:36:58,960 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001EE8E05DD40>) completed
2025-01-12 03:36:58,961 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8E064040>)
2025-01-12 03:36:58,961 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8E064040>) completed
2025-01-12 03:36:58,962 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите имя менеджера.', 'reply_to_message_id': 2314, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:36:59,070 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454133, 'timeout': 20}" and files "None"
2025-01-12 03:36:59,173 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2315,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631418,"reply_to_message":{"message_id":2314,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631417,"text":"11"},"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043c\\u044f \\u043c\\u0435\\u043d\\u0435\\u0434\\u0436\\u0435\\u0440\\u0430.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:37:03,044 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454133,\n"message":{"message_id":2316,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631421,"text":"\\u0410\\u0437\\u0438\\u043c\\u0430"}}]}'"
2025-01-12 03:37:03,046 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:37:03,046 - aiogram - DEBUG - Make request: "deleteMessage" with data: "{'chat_id': 5851877822, 'message_id': 2315}" and files "None"
2025-01-12 03:37:03,156 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454134, 'timeout': 20}" and files "None"
2025-01-12 03:37:03,161 - aiogram - DEBUG - Response for deleteMessage: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:37:03,162 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001EE8DFDAFC0>
2025-01-12 03:37:03,163 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001EE8DFDAFC0> completed
2025-01-12 03:37:03,164 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2FF10>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,))
2025-01-12 03:37:03,164 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001EE8DF2FF10>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,)) completed
2025-01-12 03:37:03,165 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001EE8E05EA40>)
2025-01-12 03:37:03,165 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x000001EE8E05EA40>) completed
2025-01-12 03:37:03,166 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2FF10>)
2025-01-12 03:37:03,166 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001EE8DF2FF10>) completed
2025-01-12 03:37:03,170 - googleapiclient.discovery - DEBUG - URL being requested: POST https://www.googleapis.com/drive/v3/files/1ahBGla54O1op6DchLZ10d_4JMIEYQJtxGgIPp89JFms/copy?alt=json
2025-01-12 03:37:03,190 - google_auth_httplib2 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2025-01-12 03:37:10,525 - googleapiclient.discovery - DEBUG - URL being requested: POST https://www.googleapis.com/drive/v3/files/1-7oiIXnPVuoy1kiekhDaZgFIfCEew63HomoRP21U1OA/permissions?fields=id&alt=json
2025-01-12 03:37:11,719 - __main__ - INFO - Таблица скопирована с ID: 1-7oiIXnPVuoy1kiekhDaZgFIfCEew63HomoRP21U1OA
2025-01-12 03:37:11,724 - googleapiclient.discovery - DEBUG - URL being requested: PATCH https://www.googleapis.com/drive/v3/files/1-7oiIXnPVuoy1kiekhDaZgFIfCEew63HomoRP21U1OA?alt=json
2025-01-12 03:37:12,331 - __main__ - INFO - Таблица 1-7oiIXnPVuoy1kiekhDaZgFIfCEew63HomoRP21U1OA переименована в Baiel Test - Азима 12.01.2025
2025-01-12 03:37:12,336 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2025-01-12 03:37:13,584 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1-7oiIXnPVuoy1kiekhDaZgFIfCEew63HomoRP21U1OA?includeGridData=false HTTP/1.1" 200 None
2025-01-12 03:37:14,429 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1-7oiIXnPVuoy1kiekhDaZgFIfCEew63HomoRP21U1OA?includeGridData=false HTTP/1.1" 200 None
2025-01-12 03:37:14,432 - __main__ - ERROR - Ошибка при обновлении last_money для клиента 11: 'Worksheet' object is not callable
Traceback (most recent call last):
  File "C:\RENDERS ANIM\pythonProject4\bot.py", line 616, in create_sf
    sheet = await asyncio.to_thread(sheet.sheet1)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'Worksheet' object is not callable
2025-01-12 03:37:14,459 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-109' coro=<Dispatcher._process_polling_updates() done, defined at C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py:274> exception=AttributeError("'int' object has no attribute 'id'")>
Traceback (most recent call last):
  File "C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 282, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 142, in process_updates
    return await asyncio.gather(*tasks)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 162, in process_update
    return await self.message_handlers.notify(update.message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\aiogram\dispatcher\handler.py", line 117, in notify
    response = await handler_obj.handler(*args, **partial_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\bot.py", line 407, in process_manager_name_table
    spreadsheet_url = await create_sf(client_id, manager_name, state)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\bot.py", line 623, in create_sf
    await save_opened_sf_async(new_spreadsheet_id, state.chat.id, first_name, last_name, city, manager_name, client_id,
                                                   ^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'id'
2025-01-12 03:37:23,263 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:37:23,379 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454134, 'timeout': 20}" and files "None"
2025-01-12 03:37:43,487 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:37:43,590 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454134, 'timeout': 20}" and files "None"
2025-01-12 03:38:03,696 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:38:03,800 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454134, 'timeout': 20}" and files "None"
2025-01-12 03:38:10,194 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-01-12 03:38:10,195 - __main__ - INFO - Бот остановлен.
2025-01-12 03:38:10,195 - aiogram - WARNING - Goodbye!
2025-01-12 03:41:07,965 - __main__ - DEBUG - Используемый интерпретатор Python: C:\RENDERS ANIM\pythonProject4\venv\Scripts\python.exe
2025-01-12 03:41:07,965 - __main__ - DEBUG - Пути поиска модулей: ['C:\\RENDERS ANIM\\pythonProject4', 'C:\\Program Files\\Python312\\python312.zip', 'C:\\Program Files\\Python312\\DLLs', 'C:\\Program Files\\Python312\\Lib', 'C:\\Program Files\\Python312', 'C:\\RENDERS ANIM\\pythonProject4\\venv', 'C:\\RENDERS ANIM\\pythonProject4\\venv\\Lib\\site-packages']
2025-01-12 03:41:07,966 - asyncio - DEBUG - Using proactor: IocpProactor
2025-01-12 03:41:08,141 - urllib3.util.retry - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2025-01-12 03:41:08,143 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-01-12 03:41:08,146 - aiogram - DEBUG - Make request: "getMe" with data: "{}" and files "None"
2025-01-12 03:41:08,486 - aiogram - DEBUG - Response for getMe: [200] "'{"ok":true,"result":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false,"can_connect_to_business":false,"has_main_web_app":false}}'"
2025-01-12 03:41:08,487 - aiogram - INFO - Bot: Admin Fashion [@DordoiFashionAdminBot]
2025-01-12 03:41:08,487 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:41:08,616 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:41:08,616 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': -1, 'timeout': 1}" and files "None"
2025-01-12 03:41:09,749 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:41:09,750 - aiogram - WARNING - Updates are skipped successfully.
2025-01-12 03:41:09,750 - __main__ - INFO - Бот запускается...
2025-01-12 03:41:09,751 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87B740>
2025-01-12 03:41:09,752 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87B740> completed
2025-01-12 03:41:09,752 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:41:09,753 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:41:09,753 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:41:09,753 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:41:09,754 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', [])
2025-01-12 03:41:09,754 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', []) completed
2025-01-12 03:41:09,754 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CF010>)
2025-01-12 03:41:09,754 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CF010>) completed
2025-01-12 03:41:09,754 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF010>)
2025-01-12 03:41:09,755 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF010>) completed
2025-01-12 03:41:09,755 - __main__ - INFO - База данных инициализирована.
2025-01-12 03:41:09,755 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-01-12 03:41:09,755 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:41:09,863 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:41:09,864 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:41:18,717 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454142,\n"message":{"message_id":2330,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631677,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}'"
2025-01-12 03:41:18,717 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:41:18,717 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Добро пожаловать! Выберите действие:', 'reply_to_message_id': 2330, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:41:18,832 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454143, 'timeout': 20}" and files "None"
2025-01-12 03:41:18,940 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2331,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631677,"reply_to_message":{"message_id":2330,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631677,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:41:23,276 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454143,\n"callback_query":{"id":"6686879795600211266","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2331,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631677,"reply_to_message":{"message_id":2330,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631677,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"create_table"}}]}'"
2025-01-12 03:41:23,278 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:41:23,279 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите ID клиента для которого необходимо создать таблицу:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:41:23,384 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454144, 'timeout': 20}" and files "None"
2025-01-12 03:41:23,405 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2332,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631682,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:41:26,048 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454144,\n"message":{"message_id":2333,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631685,"text":"11"}}]}'"
2025-01-12 03:41:26,050 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:41:26,052 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87B7E0>
2025-01-12 03:41:26,053 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87B7E0> completed
2025-01-12 03:41:26,053 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFA60>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,))
2025-01-12 03:41:26,054 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFA60>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,)) completed
2025-01-12 03:41:26,054 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8DC8C0>)
2025-01-12 03:41:26,054 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8DC8C0>) completed
2025-01-12 03:41:26,054 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFA60>)
2025-01-12 03:41:26,055 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFA60>) completed
2025-01-12 03:41:26,055 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите имя менеджера.', 'reply_to_message_id': 2333, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:41:26,161 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454145, 'timeout': 20}" and files "None"
2025-01-12 03:41:26,216 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2334,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631685,"reply_to_message":{"message_id":2333,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631685,"text":"11"},"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043c\\u044f \\u043c\\u0435\\u043d\\u0435\\u0434\\u0436\\u0435\\u0440\\u0430.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:41:29,837 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454145,\n"message":{"message_id":2335,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631688,"text":"\\u041b\\u043e\\u0445"}}]}'"
2025-01-12 03:41:29,838 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:41:29,838 - aiogram - DEBUG - Make request: "deleteMessage" with data: "{'chat_id': 5851877822, 'message_id': 2334}" and files "None"
2025-01-12 03:41:29,952 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454146, 'timeout': 20}" and files "None"
2025-01-12 03:41:30,002 - aiogram - DEBUG - Response for deleteMessage: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:41:30,003 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87BD80>
2025-01-12 03:41:30,004 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87BD80> completed
2025-01-12 03:41:30,004 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF970>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,))
2025-01-12 03:41:30,005 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF970>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,)) completed
2025-01-12 03:41:30,005 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8DD340>)
2025-01-12 03:41:30,005 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8DD340>) completed
2025-01-12 03:41:30,005 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF970>)
2025-01-12 03:41:30,006 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF970>) completed
2025-01-12 03:41:30,011 - googleapiclient.discovery - DEBUG - URL being requested: POST https://www.googleapis.com/drive/v3/files/1ahBGla54O1op6DchLZ10d_4JMIEYQJtxGgIPp89JFms/copy?alt=json
2025-01-12 03:41:30,030 - google_auth_httplib2 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2025-01-12 03:41:38,363 - googleapiclient.discovery - DEBUG - URL being requested: POST https://www.googleapis.com/drive/v3/files/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/permissions?fields=id&alt=json
2025-01-12 03:41:39,541 - __main__ - INFO - Таблица скопирована с ID: 1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ
2025-01-12 03:41:39,546 - googleapiclient.discovery - DEBUG - URL being requested: PATCH https://www.googleapis.com/drive/v3/files/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ?alt=json
2025-01-12 03:41:40,110 - __main__ - INFO - Таблица 1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ переименована в Baiel Test - Лох 12.01.2025
2025-01-12 03:41:40,111 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2025-01-12 03:41:41,206 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ?includeGridData=false HTTP/1.1" 200 None
2025-01-12 03:41:42,050 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ?includeGridData=false HTTP/1.1" 200 None
2025-01-12 03:41:42,921 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/values/%27%D0%A1%D1%87%D1%91%D1%82-%D1%84%D0%B0%D0%BA%D1%82%D1%83%D1%80%D0%B0%27%21K11?valueRenderOption=FORMATTED_VALUE HTTP/1.1" 200 None
2025-01-12 03:41:42,924 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BC7C63E0>
2025-01-12 03:41:42,924 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BC7C63E0> completed
2025-01-12 03:41:42,925 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF970>, 'UPDATE clients SET last_money = ? WHERE id = ?', ('-60', 11))
2025-01-12 03:41:42,927 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF970>, 'UPDATE clients SET last_money = ? WHERE id = ?', ('-60', 11)) completed
2025-01-12 03:41:42,927 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CF970>)
2025-01-12 03:41:42,930 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CF970>) completed
2025-01-12 03:41:42,930 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF970>)
2025-01-12 03:41:42,930 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF970>) completed
2025-01-12 03:41:42,931 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87BEC0>
2025-01-12 03:41:42,932 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87BEC0> completed
2025-01-12 03:41:42,932 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFE20>, '\n            INSERT INTO opened_sf (sf_id, chat_id, first_name, last_name, city, manager_name, client_id, phone_number, date_opened, last_opened)\n            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        ', ('1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ', 5851877822, 'Baiel', 'Test', 'Москва', 'Лох', 11, '+79999999999', '12.01.2025 03:41:42', '12.01.2025 03:41:42'))
2025-01-12 03:41:42,933 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFE20>, '\n            INSERT INTO opened_sf (sf_id, chat_id, first_name, last_name, city, manager_name, client_id, phone_number, date_opened, last_opened)\n            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        ', ('1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ', 5851877822, 'Baiel', 'Test', 'Москва', 'Лох', 11, '+79999999999', '12.01.2025 03:41:42', '12.01.2025 03:41:42')) completed
2025-01-12 03:41:42,933 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CFE20>)
2025-01-12 03:41:42,935 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CFE20>) completed
2025-01-12 03:41:42,935 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFE20>)
2025-01-12 03:41:42,935 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFE20>) completed
2025-01-12 03:41:42,935 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237B8DE3D80>
2025-01-12 03:41:42,938 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237B8DE3D80> completed
2025-01-12 03:41:42,938 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFF10>, 'UPDATE clients SET last_sf_id = ? WHERE id = ?', ('1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ', 11))
2025-01-12 03:41:42,939 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFF10>, 'UPDATE clients SET last_sf_id = ? WHERE id = ?', ('1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ', 11)) completed
2025-01-12 03:41:42,939 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CFF10>)
2025-01-12 03:41:42,941 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CFF10>) completed
2025-01-12 03:41:42,941 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFF10>)
2025-01-12 03:41:42,941 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFF10>) completed
2025-01-12 03:41:42,941 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Таблица создана и доступна по ссылке: https://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit', 'reply_to_message_id': 2335, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:41:43,235 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2336,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631702,"reply_to_message":{"message_id":2335,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631688,"text":"\\u041b\\u043e\\u0445"},"text":"\\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0430 \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0430 \\u0438 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u0430 \\u043f\\u043e \\u0441\\u0441\\u044b\\u043b\\u043a\\u0435: https://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit","entities":[{"offset":38,"length":88,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:41:46,698 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454146,\n"callback_query":{"id":"6686879796162443958","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2336,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631702,"reply_to_message":{"message_id":2335,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631688,"text":"\\u041b\\u043e\\u0445"},"text":"\\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0430 \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0430 \\u0438 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u0430 \\u043f\\u043e \\u0441\\u0441\\u044b\\u043b\\u043a\\u0435: https://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit","entities":[{"offset":38,"length":88,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"my_invoices"}}]}'"
2025-01-12 03:41:46,700 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:41:46,701 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87BEC0>
2025-01-12 03:41:46,703 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87BEC0> completed
2025-01-12 03:41:46,703 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF5B0>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,))
2025-01-12 03:41:46,704 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF5B0>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,)) completed
2025-01-12 03:41:46,704 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000237BE8DE1C0>)
2025-01-12 03:41:46,704 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000237BE8DE1C0>) completed
2025-01-12 03:41:46,704 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF5B0>)
2025-01-12 03:41:46,704 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF5B0>) completed
2025-01-12 03:41:46,705 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Ваши последние счет-фактуры:\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU\n1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ\n', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:41:46,808 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454147, 'timeout': 20}" and files "None"
2025-01-12 03:41:46,837 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2337,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631705,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU\\n1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:42:03,819 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454147,\n"callback_query":{"id":"6686879793635256676","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2337,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631705,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU\\n1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"search_client"}}]}'"
2025-01-12 03:42:03,820 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:42:03,821 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите номер телефона клиента для поиска в формате +7xxxxxxxxxx или +99x-xxx-xxx-xxx:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:42:03,926 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454148, 'timeout': 20}" and files "None"
2025-01-12 03:42:04,020 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2338,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631722,"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043d\\u043e\\u043c\\u0435\\u0440 \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043f\\u043e\\u0438\\u0441\\u043a\\u0430 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 +7xxxxxxxxxx \\u0438\\u043b\\u0438 +99x-xxx-xxx-xxx:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:42:11,078 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454148,\n"message":{"message_id":2339,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631730,"text":"+799999999999"}}]}'"
2025-01-12 03:42:11,079 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:42:11,080 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87BCE0>
2025-01-12 03:42:11,080 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87BCE0> completed
2025-01-12 03:42:11,082 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFE20>, 'SELECT id FROM clients WHERE phone_number = ?', ('+799999999999',))
2025-01-12 03:42:11,082 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CFE20>, 'SELECT id FROM clients WHERE phone_number = ?', ('+799999999999',)) completed
2025-01-12 03:42:11,083 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8F7BC0>)
2025-01-12 03:42:11,083 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8F7BC0>) completed
2025-01-12 03:42:11,083 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFE20>)
2025-01-12 03:42:11,083 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CFE20>) completed
2025-01-12 03:42:11,084 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Клиент с таким номером не найден', 'reply_to_message_id': 2339, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:42:11,197 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454149, 'timeout': 20}" and files "None"
2025-01-12 03:42:11,206 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2340,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631730,"reply_to_message":{"message_id":2339,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631730,"text":"+799999999999"},"text":"\\u041a\\u043b\\u0438\\u0435\\u043d\\u0442 \\u0441 \\u0442\\u0430\\u043a\\u0438\\u043c \\u043d\\u043e\\u043c\\u0435\\u0440\\u043e\\u043c \\u043d\\u0435 \\u043d\\u0430\\u0439\\u0434\\u0435\\u043d","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:42:18,819 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454149,\n"message":{"message_id":2341,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631737,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]}}]}'"
2025-01-12 03:42:18,820 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:42:18,822 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE8ED300>
2025-01-12 03:42:18,822 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE8ED300> completed
2025-01-12 03:42:18,823 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF5B0>, '\n            INSERT INTO user_questions (chat_id, question, date, time)\n            VALUES (?, ?, ?, ?)\n        ', (5851877822, '+79999999999', '12.01.2025', '03:42:18'))
2025-01-12 03:42:18,833 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE7CF5B0>, '\n            INSERT INTO user_questions (chat_id, question, date, time)\n            VALUES (?, ?, ?, ?)\n        ', (5851877822, '+79999999999', '12.01.2025', '03:42:18')) completed
2025-01-12 03:42:18,834 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CF5B0>)
2025-01-12 03:42:18,836 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000237BE7CF5B0>) completed
2025-01-12 03:42:18,836 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF5B0>)
2025-01-12 03:42:18,837 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE7CF5B0>) completed
2025-01-12 03:42:18,837 - __main__ - ERROR - Ошибка при обращении к OpenAI: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742
Traceback (most recent call last):
  File "C:\RENDERS ANIM\pythonProject4\bot.py", line 230, in get_openai_response
    response = await openai.ChatCompletion.acreate(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\RENDERS ANIM\pythonProject4\venv\Lib\site-packages\openai\lib\_old_api.py", line 39, in __call__
    raise APIRemovedInV1(symbol=self._symbol)
openai.lib._old_api.APIRemovedInV1: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-01-12 03:42:18,838 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Извините, произошла ошибка при обработке вашего запроса.', 'reply_to_message_id': 2341, 'parse_mode': 'html'}" and files "None"
2025-01-12 03:42:18,923 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454150, 'timeout': 20}" and files "None"
2025-01-12 03:42:18,956 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2342,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631737,"reply_to_message":{"message_id":2341,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631737,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]},"text":"\\u0418\\u0437\\u0432\\u0438\\u043d\\u0438\\u0442\\u0435, \\u043f\\u0440\\u043e\\u0438\\u0437\\u043e\\u0448\\u043b\\u0430 \\u043e\\u0448\\u0438\\u0431\\u043a\\u0430 \\u043f\\u0440\\u0438 \\u043e\\u0431\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u0435 \\u0432\\u0430\\u0448\\u0435\\u0433\\u043e \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441\\u0430."}}'"
2025-01-12 03:42:39,032 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:42:39,145 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454150, 'timeout': 20}" and files "None"
2025-01-12 03:42:42,283 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454150,\n"callback_query":{"id":"6686879793618391145","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2340,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631730,"reply_to_message":{"message_id":2339,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631730,"text":"+799999999999"},"text":"\\u041a\\u043b\\u0438\\u0435\\u043d\\u0442 \\u0441 \\u0442\\u0430\\u043a\\u0438\\u043c \\u043d\\u043e\\u043c\\u0435\\u0440\\u043e\\u043c \\u043d\\u0435 \\u043d\\u0430\\u0439\\u0434\\u0435\\u043d","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"search_client"}}]}'"
2025-01-12 03:42:42,284 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:42:42,285 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Введите номер телефона клиента для поиска в формате +7xxxxxxxxxx или +99x-xxx-xxx-xxx:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:42:42,398 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454151, 'timeout': 20}" and files "None"
2025-01-12 03:42:42,413 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2343,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631761,"text":"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043d\\u043e\\u043c\\u0435\\u0440 \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043f\\u043e\\u0438\\u0441\\u043a\\u0430 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 +7xxxxxxxxxx \\u0438\\u043b\\u0438 +99x-xxx-xxx-xxx:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:42:43,631 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454151,\n"message":{"message_id":2344,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631762,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]}}]}'"
2025-01-12 03:42:43,632 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:42:43,633 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000237BE87B920>
2025-01-12 03:42:43,636 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000237BE87B920> completed
2025-01-12 03:42:43,637 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE914A90>, 'SELECT id FROM clients WHERE phone_number = ?', ('+79999999999',))
2025-01-12 03:42:43,637 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000237BE914A90>, 'SELECT id FROM clients WHERE phone_number = ?', ('+79999999999',)) completed
2025-01-12 03:42:43,638 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8FEBC0>)
2025-01-12 03:42:43,638 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000237BE8FEBC0>) completed
2025-01-12 03:42:43,638 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE914A90>)
2025-01-12 03:42:43,639 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000237BE914A90>) completed
2025-01-12 03:42:43,639 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'ID клиента с номером телефона +79999999999: 11', 'reply_to_message_id': 2344, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:42:43,736 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454152, 'timeout': 20}" and files "None"
2025-01-12 03:42:43,782 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2345,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631762,"reply_to_message":{"message_id":2344,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631762,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]},"text":"ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0441 \\u043d\\u043e\\u043c\\u0435\\u0440\\u043e\\u043c \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 +79999999999: 11","entities":[{"offset":30,"length":12,"type":"phone_number"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:43:03,845 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:43:03,958 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454152, 'timeout': 20}" and files "None"
2025-01-12 03:43:24,065 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:43:24,180 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454152, 'timeout': 20}" and files "None"
2025-01-12 03:43:44,287 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:43:44,393 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454152, 'timeout': 20}" and files "None"
2025-01-12 03:43:48,274 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454152,\n"callback_query":{"id":"6686879794283684406","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2345,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631762,"reply_to_message":{"message_id":2344,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631762,"text":"+79999999999","entities":[{"offset":0,"length":12,"type":"phone_number"}]},"text":"ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0441 \\u043d\\u043e\\u043c\\u0435\\u0440\\u043e\\u043c \\u0442\\u0435\\u043b\\u0435\\u0444\\u043e\\u043d\\u0430 +79999999999: 11","entities":[{"offset":30,"length":12,"type":"phone_number"}],"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"sheet_to_pdf"}}]}'"
2025-01-12 03:43:48,275 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:43:48,275 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Отправьте ссылку на Google Таблицу, чтобы получить её в формате PDF.', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:43:48,377 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454153, 'timeout': 20}" and files "None"
2025-01-12 03:43:48,400 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2346,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631827,"text":"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u044c\\u0442\\u0435 \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\u043d\\u0430 Google \\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u0442\\u044c \\u0435\\u0451 \\u0432 \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 PDF.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:44:04,375 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454153,\n"message":{"message_id":2347,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631843,"text":"https://docs.google.com/spreadsheets/d/1u5Xe9Zcbe06d2mzIDhf5GE7VC5QTbXKTS26bBVsVOxg/edit?usp=drivesdk","entities":[{"offset":0,"length":101,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1u5Xe9Zcbe06d2mzIDhf5GE7VC5QTbXKTS26bBVsVOxg/edit?usp=drivesdk"}}}]}'"
2025-01-12 03:44:04,376 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:44:04,378 - googleapiclient.discovery - DEBUG - URL being requested: GET https://www.googleapis.com/drive/v3/files/1u5Xe9Zcbe06d2mzIDhf5GE7VC5QTbXKTS26bBVsVOxg/export?mimeType=application%2Fpdf
2025-01-12 03:44:05,701 - __main__ - ERROR - Ошибка при экспорте таблицы в PDF: Message.reply_document() got an unexpected keyword argument 'filename'
Traceback (most recent call last):
  File "C:\RENDERS ANIM\pythonProject4\bot.py", line 309, in export_spreadsheet_to_pdf
    await message.reply_document(document=pdf_data, filename=f"Счет-фактура-{spreadsheet_id}.pdf",
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.reply_document() got an unexpected keyword argument 'filename'
2025-01-12 03:44:05,711 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Произошла ошибка при экспорте таблицы в PDF. Пожалуйста, попробуйте позже.', 'reply_to_message_id': 2347, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:44:05,712 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454154, 'timeout': 20}" and files "None"
2025-01-12 03:44:05,927 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2348,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631844,"reply_to_message":{"message_id":2347,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736631843,"text":"https://docs.google.com/spreadsheets/d/1u5Xe9Zcbe06d2mzIDhf5GE7VC5QTbXKTS26bBVsVOxg/edit?usp=drivesdk","entities":[{"offset":0,"length":101,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1u5Xe9Zcbe06d2mzIDhf5GE7VC5QTbXKTS26bBVsVOxg/edit?usp=drivesdk"}},"text":"\\u041f\\u0440\\u043e\\u0438\\u0437\\u043e\\u0448\\u043b\\u0430 \\u043e\\u0448\\u0438\\u0431\\u043a\\u0430 \\u043f\\u0440\\u0438 \\u044d\\u043a\\u0441\\u043f\\u043e\\u0440\\u0442\\u0435 \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u044b \\u0432 PDF. \\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043f\\u043e\\u043f\\u0440\\u043e\\u0431\\u0443\\u0439\\u0442\\u0435 \\u043f\\u043e\\u0437\\u0436\\u0435.","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:44:24,542 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-01-12 03:44:24,542 - __main__ - INFO - Бот остановлен.
2025-01-12 03:44:24,542 - aiogram - WARNING - Goodbye!
2025-01-12 03:49:21,664 - __main__ - DEBUG - Используемый интерпретатор Python: C:\RENDERS ANIM\pythonProject4\venv\Scripts\python.exe
2025-01-12 03:49:21,665 - __main__ - DEBUG - Пути поиска модулей: ['C:\\RENDERS ANIM\\pythonProject4', 'C:\\Program Files\\Python312\\python312.zip', 'C:\\Program Files\\Python312\\DLLs', 'C:\\Program Files\\Python312\\Lib', 'C:\\Program Files\\Python312', 'C:\\RENDERS ANIM\\pythonProject4\\venv', 'C:\\RENDERS ANIM\\pythonProject4\\venv\\Lib\\site-packages']
2025-01-12 03:49:21,665 - asyncio - DEBUG - Using proactor: IocpProactor
2025-01-12 03:49:21,852 - urllib3.util.retry - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2025-01-12 03:49:21,854 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-01-12 03:49:21,857 - aiogram - DEBUG - Make request: "getMe" with data: "{}" and files "None"
2025-01-12 03:49:22,182 - aiogram - DEBUG - Response for getMe: [200] "'{"ok":true,"result":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false,"can_connect_to_business":false,"has_main_web_app":false}}'"
2025-01-12 03:49:22,183 - aiogram - INFO - Bot: Admin Fashion [@DordoiFashionAdminBot]
2025-01-12 03:49:22,183 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:49:22,290 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:49:22,291 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': -1, 'timeout': 1}" and files "None"
2025-01-12 03:49:23,400 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:49:23,401 - aiogram - WARNING - Updates are skipped successfully.
2025-01-12 03:49:23,401 - __main__ - INFO - Бот запускается...
2025-01-12 03:49:23,405 - __main__ - INFO - Бот остановлен.
2025-01-12 03:49:23,405 - aiogram - WARNING - Goodbye!
2025-01-12 03:53:36,451 - __main__ - DEBUG - Используемый интерпретатор Python: C:\RENDERS ANIM\pythonProject4\venv\Scripts\python.exe
2025-01-12 03:53:36,452 - __main__ - DEBUG - Пути поиска модулей: ['C:\\RENDERS ANIM\\pythonProject4', 'C:\\Program Files\\Python312\\python312.zip', 'C:\\Program Files\\Python312\\DLLs', 'C:\\Program Files\\Python312\\Lib', 'C:\\Program Files\\Python312', 'C:\\RENDERS ANIM\\pythonProject4\\venv', 'C:\\RENDERS ANIM\\pythonProject4\\venv\\Lib\\site-packages']
2025-01-12 03:53:36,452 - asyncio - DEBUG - Using proactor: IocpProactor
2025-01-12 03:53:36,637 - urllib3.util.retry - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2025-01-12 03:53:36,640 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-01-12 03:53:36,643 - aiogram - DEBUG - Make request: "getMe" with data: "{}" and files "None"
2025-01-12 03:53:36,974 - aiogram - DEBUG - Response for getMe: [200] "'{"ok":true,"result":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false,"can_connect_to_business":false,"has_main_web_app":false}}'"
2025-01-12 03:53:36,975 - aiogram - INFO - Bot: Admin Fashion [@DordoiFashionAdminBot]
2025-01-12 03:53:36,975 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:53:37,083 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:53:37,083 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': -1, 'timeout': 1}" and files "None"
2025-01-12 03:53:38,193 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:53:38,194 - aiogram - WARNING - Updates are skipped successfully.
2025-01-12 03:53:38,195 - __main__ - INFO - Бот запускается...
2025-01-12 03:53:38,197 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000002DD64A9B740>
2025-01-12 03:53:38,198 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000002DD64A9B740> completed
2025-01-12 03:53:38,199 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EF010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:53:38,200 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EF010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:53:38,200 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EF010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:53:38,200 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EF010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:53:38,200 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EF010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', [])
2025-01-12 03:53:38,201 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EF010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', []) completed
2025-01-12 03:53:38,201 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002DD649EF010>)
2025-01-12 03:53:38,201 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002DD649EF010>) completed
2025-01-12 03:53:38,201 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002DD649EF010>)
2025-01-12 03:53:38,201 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002DD649EF010>) completed
2025-01-12 03:53:38,201 - __main__ - INFO - База данных инициализирована.
2025-01-12 03:53:38,202 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-01-12 03:53:38,202 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:53:38,328 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:53:38,329 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:53:42,353 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454170,\n"message":{"message_id":2365,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632421,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}'"
2025-01-12 03:53:42,354 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:53:42,354 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Добро пожаловать! Выберите действие:', 'reply_to_message_id': 2365, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:53:42,462 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454171, 'timeout': 20}" and files "None"
2025-01-12 03:53:42,482 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2366,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632421,"reply_to_message":{"message_id":2365,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632421,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:53:44,353 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454171,\n"callback_query":{"id":"6686879792167790108","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2366,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632421,"reply_to_message":{"message_id":2365,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632421,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"my_invoices"}}]}'"
2025-01-12 03:53:44,354 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:53:44,354 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000002DD64A9B560>
2025-01-12 03:53:44,355 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000002DD64A9B560> completed
2025-01-12 03:53:44,355 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EFA60>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,))
2025-01-12 03:53:44,356 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000002DD649EFA60>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,)) completed
2025-01-12 03:53:44,356 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DD64B00340>)
2025-01-12 03:53:44,356 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DD64B00340>) completed
2025-01-12 03:53:44,356 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002DD649EFA60>)
2025-01-12 03:53:44,356 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002DD649EFA60>) completed
2025-01-12 03:53:44,356 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Ваши последние счет-фактуры:\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU\n1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ\n', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:53:44,454 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454172, 'timeout': 20}" and files "None"
2025-01-12 03:53:44,562 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2367,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632423,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\n1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68\\n1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og\\n13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q\\n12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA\\n1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs\\n1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU\\n1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:54:04,606 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:54:04,716 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454172, 'timeout': 20}" and files "None"
2025-01-12 03:54:10,928 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-01-12 03:54:10,929 - __main__ - INFO - Бот остановлен.
2025-01-12 03:54:10,930 - aiogram - WARNING - Goodbye!
2025-01-12 03:54:17,842 - __main__ - DEBUG - Используемый интерпретатор Python: C:\RENDERS ANIM\pythonProject4\venv\Scripts\python.exe
2025-01-12 03:54:17,842 - __main__ - DEBUG - Пути поиска модулей: ['C:\\RENDERS ANIM\\pythonProject4', 'C:\\Program Files\\Python312\\python312.zip', 'C:\\Program Files\\Python312\\DLLs', 'C:\\Program Files\\Python312\\Lib', 'C:\\Program Files\\Python312', 'C:\\RENDERS ANIM\\pythonProject4\\venv', 'C:\\RENDERS ANIM\\pythonProject4\\venv\\Lib\\site-packages']
2025-01-12 03:54:17,843 - asyncio - DEBUG - Using proactor: IocpProactor
2025-01-12 03:54:18,031 - urllib3.util.retry - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2025-01-12 03:54:18,034 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-01-12 03:54:18,036 - aiogram - DEBUG - Make request: "getMe" with data: "{}" and files "None"
2025-01-12 03:54:18,377 - aiogram - DEBUG - Response for getMe: [200] "'{"ok":true,"result":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false,"can_connect_to_business":false,"has_main_web_app":false}}'"
2025-01-12 03:54:18,378 - aiogram - INFO - Bot: Admin Fashion [@DordoiFashionAdminBot]
2025-01-12 03:54:18,378 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:54:18,488 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:54:18,489 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': -1, 'timeout': 1}" and files "None"
2025-01-12 03:54:19,602 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:54:19,603 - aiogram - WARNING - Updates are skipped successfully.
2025-01-12 03:54:19,603 - __main__ - INFO - Бот запускается...
2025-01-12 03:54:19,605 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x0000015D9004B740>
2025-01-12 03:54:19,606 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x0000015D9004B740> completed
2025-01-12 03:54:19,607 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9F010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:54:19,608 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9F010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:54:19,608 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9F010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:54:19,609 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9F010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:54:19,609 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9F010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', [])
2025-01-12 03:54:19,609 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9F010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', []) completed
2025-01-12 03:54:19,609 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000015D8FF9F010>)
2025-01-12 03:54:19,610 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000015D8FF9F010>) completed
2025-01-12 03:54:19,610 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000015D8FF9F010>)
2025-01-12 03:54:19,610 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000015D8FF9F010>) completed
2025-01-12 03:54:19,610 - __main__ - INFO - База данных инициализирована.
2025-01-12 03:54:19,610 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-01-12 03:54:19,610 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:54:19,721 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:54:19,722 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:54:22,831 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454172,\n"message":{"message_id":2368,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632461,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}'"
2025-01-12 03:54:22,831 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:54:22,832 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Добро пожаловать! Выберите действие:', 'reply_to_message_id': 2368, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:54:22,949 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454173, 'timeout': 20}" and files "None"
2025-01-12 03:54:22,974 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2369,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632461,"reply_to_message":{"message_id":2368,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632461,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:54:32,679 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454173,\n"callback_query":{"id":"6686879794122415163","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2369,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632461,"reply_to_message":{"message_id":2368,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632461,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"text":"\\u0414\\u043e\\u0431\\u0440\\u043e \\u043f\\u043e\\u0436\\u0430\\u043b\\u043e\\u0432\\u0430\\u0442\\u044c! \\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435:","reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"my_invoices"}}]}'"
2025-01-12 03:54:32,680 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:54:32,680 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x0000015D9004B6A0>
2025-01-12 03:54:32,680 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x0000015D9004B6A0> completed
2025-01-12 03:54:32,681 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9FA60>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,))
2025-01-12 03:54:32,681 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000015D8FF9FA60>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,)) completed
2025-01-12 03:54:32,681 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015D90090340>)
2025-01-12 03:54:32,681 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015D90090340>) completed
2025-01-12 03:54:32,682 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000015D8FF9FA60>)
2025-01-12 03:54:32,682 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000015D8FF9FA60>) completed
2025-01-12 03:54:32,682 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Ваши последние счет-фактуры:\nhttps://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edithttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edithttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edithttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edithttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edithttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edithttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:54:32,796 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454174, 'timeout': 20}" and files "None"
2025-01-12 03:54:32,862 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2370,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632471,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\nhttps://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edithttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edithttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edithttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edithttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edithttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edithttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit","entities":[{"offset":29,"length":616,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edithttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edithttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edithttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edithttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edithttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edithttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:54:51,193 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-01-12 03:54:51,193 - __main__ - INFO - Бот остановлен.
2025-01-12 03:54:51,194 - aiogram - WARNING - Goodbye!
2025-01-12 03:55:00,011 - __main__ - DEBUG - Используемый интерпретатор Python: C:\RENDERS ANIM\pythonProject4\venv\Scripts\python.exe
2025-01-12 03:55:00,012 - __main__ - DEBUG - Пути поиска модулей: ['C:\\RENDERS ANIM\\pythonProject4', 'C:\\Program Files\\Python312\\python312.zip', 'C:\\Program Files\\Python312\\DLLs', 'C:\\Program Files\\Python312\\Lib', 'C:\\Program Files\\Python312', 'C:\\RENDERS ANIM\\pythonProject4\\venv', 'C:\\RENDERS ANIM\\pythonProject4\\venv\\Lib\\site-packages']
2025-01-12 03:55:00,012 - asyncio - DEBUG - Using proactor: IocpProactor
2025-01-12 03:55:00,198 - urllib3.util.retry - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2025-01-12 03:55:00,200 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-01-12 03:55:00,203 - aiogram - DEBUG - Make request: "getMe" with data: "{}" and files "None"
2025-01-12 03:55:00,539 - aiogram - DEBUG - Response for getMe: [200] "'{"ok":true,"result":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false,"can_connect_to_business":false,"has_main_web_app":false}}'"
2025-01-12 03:55:00,540 - aiogram - INFO - Bot: Admin Fashion [@DordoiFashionAdminBot]
2025-01-12 03:55:00,540 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:55:00,659 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:55:00,660 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': -1, 'timeout': 1}" and files "None"
2025-01-12 03:55:01,774 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:55:01,775 - aiogram - WARNING - Updates are skipped successfully.
2025-01-12 03:55:01,775 - __main__ - INFO - Бот запускается...
2025-01-12 03:55:01,775 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266EF66B740>
2025-01-12 03:55:01,776 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266EF66B740> completed
2025-01-12 03:55:01,776 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:55:01,776 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF010>, '\n            CREATE TABLE IF NOT EXISTS clients (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                last_money TEXT,\n                last_sf_id TEXT,\n                city TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:55:01,777 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', [])
2025-01-12 03:55:01,777 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF010>, '\n            CREATE TABLE IF NOT EXISTS user_questions (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                chat_id INTEGER NOT NULL,\n                question TEXT NOT NULL,\n                date TEXT NOT NULL,\n                time TEXT NOT NULL\n            )\n        ', []) completed
2025-01-12 03:55:01,777 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', [])
2025-01-12 03:55:01,777 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF010>, '\n            CREATE TABLE IF NOT EXISTS opened_sf (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                sf_id TEXT NOT NULL,\n                chat_id INTEGER NOT NULL,\n                first_name TEXT NOT NULL,\n                last_name TEXT NOT NULL,\n                city TEXT NOT NULL,\n                manager_name TEXT NOT NULL,\n                client_id TEXT NOT NULL,\n                phone_number TEXT NOT NULL,\n                date_opened TEXT NOT NULL,\n                last_opened TEXT\n            )\n        ', []) completed
2025-01-12 03:55:01,777 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BF010>)
2025-01-12 03:55:01,778 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BF010>) completed
2025-01-12 03:55:01,778 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BF010>)
2025-01-12 03:55:01,778 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BF010>) completed
2025-01-12 03:55:01,778 - __main__ - INFO - База данных инициализирована.
2025-01-12 03:55:01,778 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-01-12 03:55:01,778 - aiogram - DEBUG - Make request: "getWebhookInfo" with data: "{}" and files "None"
2025-01-12 03:55:01,887 - aiogram - DEBUG - Response for getWebhookInfo: [200] "'{"ok":true,"result":{"url":"","has_custom_certificate":false,"pending_update_count":0}}'"
2025-01-12 03:55:01,887 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'timeout': 20}" and files "None"
2025-01-12 03:55:14,699 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454174,\n"callback_query":{"id":"6686879795451574115","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2370,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632471,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\nhttps://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edithttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edithttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edithttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edithttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edithttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edithttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit","entities":[{"offset":29,"length":616,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edithttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edithttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edithttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edithttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edithttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edithttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"my_invoices"}}]}'"
2025-01-12 03:55:14,699 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:55:14,700 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266EF66B9C0>
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266EF66B9C0> completed
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF2E0>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,))
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BF2E0>, 'SELECT sf_id FROM opened_sf WHERE chat_id = ?', (5851877822,)) completed
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000266EF67FA40>)
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000266EF67FA40>) completed
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BF2E0>)
2025-01-12 03:55:14,702 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BF2E0>) completed
2025-01-12 03:55:14,702 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Ваши последние счет-фактуры:\nhttps://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edit\nhttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edit\nhttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edit\nhttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edit\nhttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edit\nhttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edit\nhttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit\n', 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:55:14,816 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454175, 'timeout': 20}" and files "None"
2025-01-12 03:55:14,861 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2371,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632513,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\nhttps://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edit\\nhttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edit\\nhttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edit\\nhttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edit\\nhttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edit\\nhttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edit\\nhttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit","entities":[{"offset":29,"length":88,"type":"url"},{"offset":118,"length":88,"type":"url"},{"offset":207,"length":88,"type":"url"},{"offset":296,"length":88,"type":"url"},{"offset":385,"length":88,"type":"url"},{"offset":474,"length":88,"type":"url"},{"offset":563,"length":88,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:55:35,146 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:55:35,258 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454175, 'timeout': 20}" and files "None"
2025-01-12 03:55:55,369 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:55:55,486 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454175, 'timeout': 20}" and files "None"
2025-01-12 03:56:15,594 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:56:15,702 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454175, 'timeout': 20}" and files "None"
2025-01-12 03:56:35,812 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:56:35,921 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454175, 'timeout': 20}" and files "None"
2025-01-12 03:56:41,628 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454175,\n"callback_query":{"id":"6686879795322292102","from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"message":{"message_id":2371,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632513,"text":"\\u0412\\u0430\\u0448\\u0438 \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0435 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b:\\nhttps://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edit\\nhttps://docs.google.com/spreadsheets/d/1zs7GlfrxjcVUqGs14_iCsJvls8L6nK-Q5e2W-KuS-Og/edit\\nhttps://docs.google.com/spreadsheets/d/13rJL9P6RMxSrBVmtBf31OgDzY06zh2y0aFEqtlIPz1Q/edit\\nhttps://docs.google.com/spreadsheets/d/12INAiEDoS9v16jqnPmvJsl5-u3eA-7oy1wUyyu3B8wA/edit\\nhttps://docs.google.com/spreadsheets/d/1TntjMbkFErUFbm1V3Sd1aCutfW1b2Cao8uFqgeqYQRs/edit\\nhttps://docs.google.com/spreadsheets/d/1p6iEHVEbE56mltkOdQih8zbzy70ryfO9N7aPgbGEwhU/edit\\nhttps://docs.google.com/spreadsheets/d/1uqyIuoMegZrwkUKkL-g254C2BUnTMd7FOVaCGbGQZQQ/edit","entities":[{"offset":29,"length":88,"type":"url"},{"offset":118,"length":88,"type":"url"},{"offset":207,"length":88,"type":"url"},{"offset":296,"length":88,"type":"url"},{"offset":385,"length":88,"type":"url"},{"offset":474,"length":88,"type":"url"},{"offset":563,"length":88,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1JT011KSOSMYyfXIIEL3NOnUQpEVRCQffXUUVcrYYj68/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}},"chat_instance":"79870086369164028","data":"create_table"}}]}'"
2025-01-12 03:56:41,629 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:56:41,629 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите ID клиента для которого необходимо создать таблицу:', 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:56:41,741 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454176, 'timeout': 20}" and files "None"
2025-01-12 03:56:41,777 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2372,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632600,"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 ID \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430 \\u0434\\u043b\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0442\\u0430\\u0431\\u043b\\u0438\\u0446\\u0443:","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:56:44,406 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454176,\n"message":{"message_id":2373,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632603,"text":"11"}}]}'"
2025-01-12 03:56:44,407 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:56:44,408 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266EF66B6A0>
2025-01-12 03:56:44,409 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266EF66B6A0> completed
2025-01-12 03:56:44,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFB50>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,))
2025-01-12 03:56:44,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFB50>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,)) completed
2025-01-12 03:56:44,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000266EF6D1240>)
2025-01-12 03:56:44,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000266EF6D1240>) completed
2025-01-12 03:56:44,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFB50>)
2025-01-12 03:56:44,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFB50>) completed
2025-01-12 03:56:44,412 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Пожалуйста, введите имя менеджера.', 'reply_to_message_id': 2373, 'reply_markup': '{"inline_keyboard": [[{"text": "Отмена", "callback_data": "cancel"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:56:44,528 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454177, 'timeout': 20}" and files "None"
2025-01-12 03:56:44,541 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2374,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632603,"reply_to_message":{"message_id":2373,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632603,"text":"11"},"text":"\\u041f\\u043e\\u0436\\u0430\\u043b\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043c\\u044f \\u043c\\u0435\\u043d\\u0435\\u0434\\u0436\\u0435\\u0440\\u0430.","reply_markup":{"inline_keyboard":[[{"text":"\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430","callback_data":"cancel"}]]}}}'"
2025-01-12 03:56:46,942 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[{"update_id":927454177,\n"message":{"message_id":2375,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632605,"text":"\\u0420\\u043e\\u043b"}}]}'"
2025-01-12 03:56:46,944 - aiogram.dispatcher.dispatcher - DEBUG - Received 1 updates.
2025-01-12 03:56:46,945 - aiogram - DEBUG - Make request: "deleteMessage" with data: "{'chat_id': 5851877822, 'message_id': 2374}" and files "None"
2025-01-12 03:56:47,053 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454178, 'timeout': 20}" and files "None"
2025-01-12 03:56:47,075 - aiogram - DEBUG - Response for deleteMessage: [200] "'{"ok":true,"result":true}'"
2025-01-12 03:56:47,076 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266EF66BD80>
2025-01-12 03:56:47,077 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266EF66BD80> completed
2025-01-12 03:56:47,077 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFA60>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,))
2025-01-12 03:56:47,077 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFA60>, 'SELECT first_name, last_name, phone_number, city FROM clients WHERE id = ?', (11,)) completed
2025-01-12 03:56:47,078 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000266EF6D1C40>)
2025-01-12 03:56:47,078 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x00000266EF6D1C40>) completed
2025-01-12 03:56:47,079 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFA60>)
2025-01-12 03:56:47,079 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFA60>) completed
2025-01-12 03:56:47,083 - googleapiclient.discovery - DEBUG - URL being requested: POST https://www.googleapis.com/drive/v3/files/1ahBGla54O1op6DchLZ10d_4JMIEYQJtxGgIPp89JFms/copy?alt=json
2025-01-12 03:56:47,102 - google_auth_httplib2 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2025-01-12 03:56:56,993 - googleapiclient.discovery - DEBUG - URL being requested: POST https://www.googleapis.com/drive/v3/files/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo/permissions?fields=id&alt=json
2025-01-12 03:56:58,130 - __main__ - INFO - Таблица скопирована с ID: 1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo
2025-01-12 03:56:58,132 - googleapiclient.discovery - DEBUG - URL being requested: PATCH https://www.googleapis.com/drive/v3/files/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo?alt=json
2025-01-12 03:56:58,709 - __main__ - INFO - Таблица 1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo переименована в Baiel Test - Рол 12.01.2025
2025-01-12 03:56:58,710 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2025-01-12 03:57:00,276 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo?includeGridData=false HTTP/1.1" 200 None
2025-01-12 03:57:01,188 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo?includeGridData=false HTTP/1.1" 200 None
2025-01-12 03:57:02,145 - urllib3.connectionpool - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo/values/%27%D0%A1%D1%87%D1%91%D1%82-%D1%84%D0%B0%D0%BA%D1%82%D1%83%D1%80%D0%B0%27%21K11?valueRenderOption=FORMATTED_VALUE HTTP/1.1" 200 None
2025-01-12 03:57:02,146 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266E9C03D80>
2025-01-12 03:57:02,146 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266E9C03D80> completed
2025-01-12 03:57:02,146 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFA60>, 'UPDATE clients SET last_money = ? WHERE id = ?', ('-60', 11))
2025-01-12 03:57:02,147 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFA60>, 'UPDATE clients SET last_money = ? WHERE id = ?', ('-60', 11)) completed
2025-01-12 03:57:02,147 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BFA60>)
2025-01-12 03:57:02,147 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BFA60>) completed
2025-01-12 03:57:02,147 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFA60>)
2025-01-12 03:57:02,147 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFA60>) completed
2025-01-12 03:57:02,148 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266ED5B63E0>
2025-01-12 03:57:02,148 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266ED5B63E0> completed
2025-01-12 03:57:02,148 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFE20>, '\n            INSERT INTO opened_sf (sf_id, chat_id, first_name, last_name, city, manager_name, client_id, phone_number, date_opened, last_opened)\n            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        ', ('1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo', 5851877822, 'Baiel', 'Test', 'Москва', 'Рол', 11, '+79999999999', '12.01.2025 03:57:02', '12.01.2025 03:57:02'))
2025-01-12 03:57:02,149 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFE20>, '\n            INSERT INTO opened_sf (sf_id, chat_id, first_name, last_name, city, manager_name, client_id, phone_number, date_opened, last_opened)\n            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        ', ('1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo', 5851877822, 'Baiel', 'Test', 'Москва', 'Рол', 11, '+79999999999', '12.01.2025 03:57:02', '12.01.2025 03:57:02')) completed
2025-01-12 03:57:02,149 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BFE20>)
2025-01-12 03:57:02,151 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BFE20>) completed
2025-01-12 03:57:02,151 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFE20>)
2025-01-12 03:57:02,152 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFE20>) completed
2025-01-12 03:57:02,152 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000266EF66BB00>
2025-01-12 03:57:02,153 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000266EF66BB00> completed
2025-01-12 03:57:02,154 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFE20>, 'UPDATE clients SET last_sf_id = ? WHERE id = ?', ('1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo', 11))
2025-01-12 03:57:02,154 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000266EF5BFE20>, 'UPDATE clients SET last_sf_id = ? WHERE id = ?', ('1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo', 11)) completed
2025-01-12 03:57:02,155 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BFE20>)
2025-01-12 03:57:02,156 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000266EF5BFE20>) completed
2025-01-12 03:57:02,156 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFE20>)
2025-01-12 03:57:02,157 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000266EF5BFE20>) completed
2025-01-12 03:57:02,157 - aiogram - DEBUG - Make request: "sendMessage" with data: "{'chat_id': 5851877822, 'text': 'Таблица создана и доступна по ссылке: https://docs.google.com/spreadsheets/d/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo/edit', 'reply_to_message_id': 2375, 'reply_markup': '{"inline_keyboard": [[{"text": "Создать счет-фактуру", "callback_data": "create_table"}, {"text": "Регистрация клиента", "callback_data": "register_client"}], [{"text": "Поиск клиента", "callback_data": "search_client"}, {"text": "Мои счет-фактуры", "callback_data": "my_invoices"}], [{"text": "Счет-фактура в PDF", "callback_data": "sheet_to_pdf"}]]}', 'parse_mode': 'html'}" and files "None"
2025-01-12 03:57:02,510 - aiogram - DEBUG - Response for sendMessage: [200] "'{"ok":true,"result":{"message_id":2376,"from":{"id":7130675357,"is_bot":true,"first_name":"Admin Fashion","username":"DordoiFashionAdminBot"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632621,"reply_to_message":{"message_id":2375,"from":{"id":5851877822,"is_bot":false,"first_name":"MangoL","username":"o44444v","language_code":"ru"},"chat":{"id":5851877822,"first_name":"MangoL","username":"o44444v","type":"private"},"date":1736632605,"text":"\\u0420\\u043e\\u043b"},"text":"\\u0422\\u0430\\u0431\\u043b\\u0438\\u0446\\u0430 \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0430 \\u0438 \\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u0430 \\u043f\\u043e \\u0441\\u0441\\u044b\\u043b\\u043a\\u0435: https://docs.google.com/spreadsheets/d/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo/edit","entities":[{"offset":38,"length":88,"type":"url"}],"link_preview_options":{"url":"https://docs.google.com/spreadsheets/d/1UaHfmff4MMu5CnHe605RbFBt7XUGmXU4Qeysz6QZhTo/edit"},"reply_markup":{"inline_keyboard":[[{"text":"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0443","callback_data":"create_table"},{"text":"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044f \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"register_client"}],[{"text":"\\u041f\\u043e\\u0438\\u0441\\u043a \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442\\u0430","callback_data":"search_client"},{"text":"\\u041c\\u043e\\u0438 \\u0441\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u044b","callback_data":"my_invoices"}],[{"text":"\\u0421\\u0447\\u0435\\u0442-\\u0444\\u0430\\u043a\\u0442\\u0443\\u0440\\u0430 \\u0432 PDF","callback_data":"sheet_to_pdf"}]]}}}'"
2025-01-12 03:57:07,176 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:57:07,291 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454178, 'timeout': 20}" and files "None"
2025-01-12 03:57:27,395 - aiogram - DEBUG - Response for getUpdates: [200] "'{"ok":true,"result":[]}'"
2025-01-12 03:57:27,502 - aiogram - DEBUG - Make request: "getUpdates" with data: "{'offset': 927454178, 'timeout': 20}" and files "None"
2025-01-12 03:57:39,418 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-01-12 03:57:39,419 - __main__ - INFO - Бот остановлен.
2025-01-12 03:57:39,420 - aiogram - WARNING - Goodbye!
